{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/home/hamza/Desktop/portfolio/components/gim.tsx\";\nimport { useState } from 'react';\nimport { motion, useTransform, useViewportScroll } from 'framer-motion';\nconst gimsProps = [{\n  id: 0,\n  // needed to fix \" key for map, organize layer order \"\n  type: \"main\",\n  leftRight: 0,\n  next: 1,\n  prev: 2,\n  properties: {\n    title: \"main\",\n    size: 100,\n    posi: {\n      x: 34,\n      y: 55\n    },\n    scale: 1.8,\n    zIndex: 50\n  }\n}, {\n  id: 1,\n  type: \"next\",\n  leftRight: 1,\n  next: 3,\n  prev: 0,\n  properties: {\n    title: \"next\",\n    size: 60,\n    posi: {\n      x: 75,\n      y: 40\n    },\n    scale: 1,\n    zIndex: 10\n  }\n}, {\n  id: 2,\n  type: \"previous\",\n  leftRight: -1,\n  next: 0,\n  prev: 4,\n  properties: {\n    title: \"previous\",\n    size: 80,\n    posi: {\n      x: 15,\n      y: 12\n    },\n    scale: 0.9,\n    zIndex: 0\n  }\n}, {\n  id: 3,\n  type: \"onHold\",\n  leftRight: 1,\n  next: 4,\n  prev: 1,\n  properties: {\n    title: \"...\",\n    size: 50,\n    posi: {\n      x: 60,\n      y: 8\n    },\n    scale: 0.3,\n    zIndex: 0\n  }\n}, {\n  id: 4,\n  type: \"hidden\",\n  leftRight: -1,\n  next: 2,\n  prev: 3,\n  properties: {\n    title: \"hidden\",\n    size: 40,\n    posi: {\n      x: 40,\n      y: 9\n    },\n    scale: 0.1,\n    zIndex: 0\n  }\n}];\n\nconst getGimPropsById = gimId => {\n  return gimsProps.filter(gimProps => gimProps.id == gimId).pop() || gimsProps[0];\n};\n\nexport default function Gim({\n  data,\n  gimId,\n  direction,\n  steps,\n  nextPosition,\n  setOnDisplay,\n  onDisplay\n}) {\n  const {\n    scrollYProgress\n  } = useViewportScroll();\n  const yRange = useTransform(scrollYProgress, [0, 0.9], [0, 1]);\n  const {\n    0: animationDelay,\n    1: setDelay\n  } = useState(Math.random());\n  console.log(\"render gim : [\" + gimId + \"] random number : \" + animationDelay);\n  const currentGim = getGimPropsById(gimId);\n  const prevGim = direction < 0 ? getGimPropsById(currentGim.prev) : getGimPropsById(currentGim.next);\n  const nextGim = direction < 0 ? getGimPropsById(currentGim.next) : getGimPropsById(currentGim.prev);\n  const gimvariants = {\n    enter: direction => {\n      return {\n        y: 0,\n        top: `${prevGim.properties.posi.y}%`,\n        left: `${prevGim.properties.posi.x}%`,\n        scale: prevGim.properties.scale,\n        zIndex: prevGim.properties.zIndex\n      };\n    },\n    standing: {\n      y: [-10, 10],\n      top: `${currentGim.properties.posi.y}%`,\n      left: `${currentGim.properties.posi.x}%`,\n      scale: currentGim.properties.scale,\n      zIndex: direction > 0 && gimId == 2 ? 10 : currentGim.properties.zIndex,\n      transition: {\n        y: {\n          yoyo: Infinity,\n          duration: 1 // delay : animationDelay * 2\n\n        },\n        type: \"spring\",\n        duration: 1.3\n      }\n    },\n    display: {\n      // position : 'fixed',\n      left: '0%',\n      bottom: '0%'\n    },\n    exit: direction => {\n      return {\n        y: 0,\n        top: `${nextGim.properties.posi.y}%`,\n        left: `${nextGim.properties.posi.x}%`,\n        scale: nextGim.properties.scale,\n        zIndex: nextGim.properties.zIndex\n      };\n    }\n  };\n  const currentData = getGimCurrenData(data, gimId, steps, direction);\n  return /*#__PURE__*/_jsxDEV(motion.div, {\n    className: `absolute  flex justify-center items-center ${\"h-36\" || \"h-4\"} ${\"w-36\" || \"w-4\"} m-5 rounded-full bg-blue-400`,\n    variants: gimvariants,\n    initial: \"enter\",\n    animate: onDisplay.displayState && gimId == 0 ? \"display\" : \"standing\",\n    custom: direction,\n    drag: true,\n    dragConstraints: {\n      top: 0,\n      left: 0,\n      right: 0,\n      bottom: 0\n    },\n    whileHover: {\n      // scale: currentGim.properties.scale * 1.2,\n      boxShadow: '0 0px 20px 8px rgba(255, 255, 255, 0.5)',\n      transition: {\n        duration: 0.3\n      }\n    },\n    onMouseDown: () => gimId == 0 ? setOnDisplay(!onDisplay.displayState, fixGimsDataIndex(data, steps + 1), 0) : nextPosition(currentGim.leftRight),\n    children: /*#__PURE__*/_jsxDEV(\"h1\", {\n      children: currentData ? currentData.current : \"\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 5\n    }, this)\n  }, steps, false, {\n    fileName: _jsxFileName,\n    lineNumber: 149,\n    columnNumber: 4\n  }, this);\n}\n\nfunction fixGimsDataIndex(data, steps) {\n  let fixedIndex = steps < 0 ? (data.length + steps % data.length) % data.length : steps % data.length;\n  return fixedIndex;\n}\n\nfunction getGimCurrenData(data, gimId, moveSteps, moveDirection) {\n  switch (gimId) {\n    case 0:\n      // main gim\n      return {\n        current: data[fixGimsDataIndex(data, moveSteps + 1)],\n        next: data[fixGimsDataIndex(data, moveSteps + 2)],\n        prev: data[fixGimsDataIndex(data, moveSteps)]\n      };\n\n    case 1:\n      // next gim\n      return {\n        current: data[fixGimsDataIndex(data, moveSteps + 2)],\n        next: data[fixGimsDataIndex(data, moveSteps + 3)],\n        prev: data[fixGimsDataIndex(data, moveSteps + 1)]\n      };\n\n    case 2:\n      // prev gim\n      return {\n        current: data[fixGimsDataIndex(data, moveSteps)],\n        next: data[fixGimsDataIndex(data, moveSteps - 1)],\n        prev: data[fixGimsDataIndex(data, moveSteps + 1)]\n      };\n\n    case 3:\n      // onHold gim\n      return {\n        current: data[fixGimsDataIndex(data, moveSteps + 3)],\n        next: data[fixGimsDataIndex(data, moveSteps + 4)],\n        prev: data[fixGimsDataIndex(data, moveSteps + 2)]\n      };\n\n    case 4:\n      // hidden gim\n      let updatedIndex = moveDirection < 0 ? moveSteps : moveSteps + 3;\n      return {\n        current: data[fixGimsDataIndex(data, moveSteps + 4)],\n        next: data[fixGimsDataIndex(data, moveSteps + 5)],\n        prev: data[fixGimsDataIndex(data, updatedIndex)]\n      };\n  }\n\n  return 0;\n}","map":{"version":3,"sources":["/home/hamza/Desktop/portfolio/components/gim.tsx"],"names":["useState","motion","useTransform","useViewportScroll","gimsProps","id","type","leftRight","next","prev","properties","title","size","posi","x","y","scale","zIndex","getGimPropsById","gimId","filter","gimProps","pop","Gim","data","direction","steps","nextPosition","setOnDisplay","onDisplay","scrollYProgress","yRange","animationDelay","setDelay","Math","random","console","log","currentGim","prevGim","nextGim","gimvariants","enter","top","left","standing","transition","yoyo","Infinity","duration","display","bottom","exit","currentData","getGimCurrenData","displayState","right","boxShadow","fixGimsDataIndex","current","fixedIndex","length","moveSteps","moveDirection","updatedIndex"],"mappings":"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","sourcesContent":["import { useState, useEffect, useRef } from 'react'\nimport { motion, AnimatePresence, useTransform, useViewportScroll, useMotionValue } from 'framer-motion'\nimport { wrap } from 'popmotion'\n\n\n\nconst gimsProps = [\n\t{\n\t\tid: 0, // needed to fix \" key for map, organize layer order \"\n\t\ttype: \"main\",\n\t\tleftRight: 0,\n\t\tnext: 1,\n\t\tprev: 2,\n\t\tproperties: {\n\t\t\ttitle: \"main\",\n\t\t\tsize: 100,\n\t\t\tposi: { x: 34, y: 55 },\n\t\t\tscale: 1.8,\n\t\t\tzIndex: 50,\n\t\t}\n\t},\n\t{\n\t\tid: 1,\n\t\ttype: \"next\",\n\t\tleftRight: 1,\n\t\tnext: 3,\n\t\tprev: 0,\n\t\tproperties: {\n\t\t\ttitle: \"next\",\n\t\t\tsize: 60,\n\t\t\tposi: { x: 75, y: 40 },\n\t\t\tscale: 1,\n\t\t\tzIndex: 10,\n\n\t\t}\n\t},\n\t{\n\t\tid: 2,\n\t\ttype: \"previous\",\n\t\tleftRight: -1,\n\t\tnext: 0,\n\t\tprev: 4,\n\t\tproperties: {\n\t\t\ttitle: \"previous\",\n\t\t\tsize: 80,\n\t\t\tposi: { x: 15, y: 12 },\n\t\t\tscale: 0.9,\n\t\t\tzIndex: 0,\n\t\t}\n\t},\n\t{\n\t\tid: 3,\n\t\ttype: \"onHold\",\n\t\tleftRight: 1,\n\t\tnext: 4,\n\t\tprev: 1,\n\t\tproperties: {\n\t\t\ttitle: \"...\",\n\t\t\tsize: 50,\n\t\t\tposi: { x: 60, y: 8 },\n\t\t\tscale: 0.3,\n\t\t\tzIndex: 0,\n\t\t}\n\t}\n\t,\n\t{\n\t\tid: 4,\n\t\ttype: \"hidden\",\n\t\tleftRight: -1,\n\t\tnext: 2,\n\t\tprev: 3,\n\t\tproperties: {\n\t\t\ttitle: \"hidden\",\n\t\t\tsize: 40,\n\t\t\tposi: { x: 40, y: 9 },\n\t\t\tscale: 0.1,\n\t\t\tzIndex: 0,\n\t\t}\n\t}\n]\n\nconst getGimPropsById = (gimId: number) => {\n\treturn gimsProps.filter((gimProps) => gimProps.id == gimId).pop() || gimsProps[0];\n}\n\n\n\nexport default function Gim({data, gimId, direction, steps, nextPosition, setOnDisplay, onDisplay }) {\n\n\tconst { scrollYProgress } = useViewportScroll();\n \tconst yRange = useTransform(scrollYProgress, [0, 0.9], [0, 1]);\n  \n  const [animationDelay, setDelay] = useState(Math.random());\n  \n\t\n\tconsole.log(\"render gim : [\" + gimId + \"] random number : \" + animationDelay);\n\t\n\tconst currentGim = getGimPropsById(gimId);\n\tconst prevGim = (direction < 0) ? getGimPropsById(currentGim.prev) : getGimPropsById(currentGim.next);\n\tconst nextGim = (direction < 0) ? getGimPropsById(currentGim.next) : getGimPropsById(currentGim.prev);\n\t\n\t\n\tconst gimvariants = {\n\t\tenter: (direction: number) => {\n\t\t\treturn {\n\t\t\t\ty: 0,\n\t\t\t\ttop: `${prevGim.properties.posi.y}%`,\n\t\t\t\tleft: `${prevGim.properties.posi.x}%`,\n\t\t\t\tscale: prevGim.properties.scale,\n\t\t\t\tzIndex: prevGim.properties.zIndex,\n\t\t\t};\n\t\t\t\n\t\t},\n\t\tstanding: {\n\t\t\ty: [-10 , 10],\n\t\t\ttop: `${currentGim.properties.posi.y}%`,\n\t\t\tleft: `${currentGim.properties.posi.x}%`,\n\t\t\tscale: currentGim.properties.scale,\n\t\t\tzIndex:  direction > 0 && gimId == 2? 10 : currentGim.properties.zIndex,\n\t\t\ttransition: {\n\t\t\t\ty: {\n\t\t\t\t\tyoyo : Infinity,\n\t\t\t\t\tduration: 1,\n\t\t\t\t\t// delay : animationDelay * 2\n\t\t\t\t},\n\t\t\t\ttype : \"spring\",\n\t\t\t\tduration : 1.3\n\t\t\t}\n\t\t},\n\t\tdisplay : {\n\t\t\t// position : 'fixed',\n\t\t\t\tleft : '0%',\n\t\t\t\tbottom : '0%' \n\t\t},\n\t\texit: (direction: number) => {\n\t\t\treturn {\n\t\t\t\ty : 0,\n\t\t\t\ttop: `${nextGim.properties.posi.y}%`,\n\t\t\t\tleft: `${nextGim.properties.posi.x}%`,\n\t\t\t\tscale: nextGim.properties.scale,\n\t\t\t\tzIndex:  nextGim.properties.zIndex,\n\t\t\t};\n\t\t}\n\t}\n\t\n\tconst currentData = getGimCurrenData(data, gimId, steps, direction);\n\n\treturn (\n\t\t\t<motion.div\n\t\t\t\tclassName={`absolute  flex justify-center items-center ${\"h-36\" || \"h-4\"} ${\"w-36\" || \"w-4\"} m-5 rounded-full bg-blue-400`}\n\t\t\t\tkey={steps}\n\t\t\t\tvariants={gimvariants}\n\t\t\t\tinitial=\"enter\"\n\t\t\t\tanimate={onDisplay.displayState && gimId == 0 ? \"display\" : \"standing\"}\n\t\t\t\tcustom={direction}\n\t\t\t\tdrag\n\t\t\t\tdragConstraints={{\n\t\t\t\t\ttop : 0,\n\t\t\t\t\tleft: 0,\n\t\t\t\t\tright: 0,\n\t\t\t\t\tbottom: 0,\n\t\t\t\t}}\n\t\t\t\twhileHover={{\n\t\t\t\t\t// scale: currentGim.properties.scale * 1.2,\n\t\t\t\t\tboxShadow: '0 0px 20px 8px rgba(255, 255, 255, 0.5)',\n\t\t\t\t\ttransition :{\n\t\t\t\t\t\tduration : 0.3,\n\t\t\t\t\t},\n\t\t\t\t}}\n\t\t\t\tonMouseDown={() => gimId == 0 ? setOnDisplay(!onDisplay.displayState, fixGimsDataIndex(data, steps + 1), 0): nextPosition(currentGim.leftRight)}\n\t\t\t>\n\t\t\t\t<h1>{currentData ? currentData.current : \"\"}</h1>\n\t\t\t</motion.div>\n\t);\n}\n\n\n\n\n\n\n\nfunction fixGimsDataIndex(data, steps) {\n\tlet fixedIndex = steps < 0 ? ((data.length) + (steps % data.length)) % data.length  : steps % data.length;\n\treturn (fixedIndex);\n}\n\nfunction getGimCurrenData(data, gimId, moveSteps, moveDirection) {\n\tswitch (gimId) {\n\t\tcase 0: // main gim\n\t\t\treturn {\n\t\t\t\tcurrent : data[fixGimsDataIndex(data, moveSteps + 1)],\n\t\t\t\tnext : data[fixGimsDataIndex(data, moveSteps + 2)],\n\t\t\t\tprev : data[fixGimsDataIndex(data, moveSteps )],\n\t\t\t};\n\t\tcase 1: // next gim\n\t\t\treturn {\n\t\t\t\tcurrent : data[fixGimsDataIndex(data, moveSteps + 2)],\n\t\t\t\tnext : data[fixGimsDataIndex(data, moveSteps + 3)],\n\t\t\t\tprev : data[fixGimsDataIndex(data, moveSteps + 1)],\n\t\t\t};\n\t\tcase 2: // prev gim\n\t\t\treturn {\n\t\t\t\tcurrent : data[fixGimsDataIndex(data, moveSteps)],\n\t\t\t\tnext : data[fixGimsDataIndex(data, moveSteps - 1)],\n\t\t\t\tprev : data[fixGimsDataIndex(data, moveSteps + 1)],\n\t\t\t};\n\t\tcase 3: // onHold gim\n\t\t\treturn {\n\t\t\t\tcurrent : data[fixGimsDataIndex(data, moveSteps + 3)],\n\t\t\t\tnext : data[fixGimsDataIndex(data, moveSteps + 4)],\n\t\t\t\tprev : data[fixGimsDataIndex(data, moveSteps + 2)],\n\t\t\t};\n\t\tcase 4: // hidden gim\n\t\t\tlet updatedIndex = (moveDirection < 0) ? moveSteps : moveSteps + 3;\n\t\t\treturn {\n\t\t\t\tcurrent : data[fixGimsDataIndex(data, moveSteps + 4)],\n\t\t\t\tnext : data[fixGimsDataIndex(data, moveSteps + 5)],\n\t\t\t\tprev : data[fixGimsDataIndex(data, updatedIndex)],\n\t\t\t};\n\t\t}\n\treturn (0);\n}\n"]},"metadata":{},"sourceType":"module"}